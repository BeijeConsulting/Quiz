<!DOCTYPE html>
<html>
<head>

<style>
</style>
</head>
<body>


	<h1>Campi Domanda:</h1>
	<br>
	<br> INSERISCI UNA DOMANDA:
	<br>
	<br> Inserisci il titolo del libro a cui appartiene la domanda:
	<input type="text" placeholder="insert book title" id="book_title">
	<br>
	<br> Inserisci il capitolo della domanda:
	<input type="number" placeholder="inserisci capitolo " id="chapter">
	<br>
	<br> Inserisci il numero della domanda:
	<input type="number" placeholder="inserisci question " id="n_question">
	<br>
	<br> Inserisci il testo della domanda:
	<br>
	<br>
	<textarea id="txt_domanda" rows="5" cols="60"></textarea>
	<br>
	<br>
	<h4>MODALITA' DI RISPOSTA:</h4>
	<br>
	Risposta multipla:<input type="radio" id="param_type" name="param_type" value="checkbox">
	<br><br>
	Risposta singola:<input type="radio" id="param_type" name="param_type" value="radio">

	<br>
	<br>
	<br>
	<input type="button" value="Aggiungi Risposta..." id="button_risposte" onclick="inserisciRisposta()">
	<div id="risposte"></div>

	Inserisci Risposta/e Esatta/e:
	<input type="text" id="risposteEsatte" placeholder='esempio : "ABCD"'>
	<br>
	<br> Inserisci spiegazione:
	<br>
	<br>
	<textarea  rows="5" cols="60" id="spiegazione"></textarea>
	<hr>
	<hr>
	<input type="button" value="Inserisci Tutti i Campi Domanda..."
		onclick="inserisciDomanda()">
	<div id="result"></div>



	<script>
		var nRisp = 0;
		function inserisciRisposta() {

			let insertBut = document.getElementById("button_risposte");
			let newLab = document.createElement("input");
			newLab.setAttribute("type", "text");
			newLab.setAttribute("id", "risp" + nRisp);
			document.getElementById("risposte").appendChild(newLab);
			nRisp++;
		}
	
		function inserisciDomanda() {

			let bookTitle = document.getElementById("book_title").value;
			let quest = document.getElementById("n_question").value;
			let chapter = document.getElementById("chapter").value;
			
			let text = document.getElementById("txt_domanda").value;
			
			let risposteEsatte = document.getElementById("risposteEsatte").value;
			let spiegazione = document.getElementById("spiegazione").value;
			let url = 'http://localhost:8080/Quiz/creadomanda';
			
			let answerType = document.getElementById("param_type").value;
			console.log(answerType);
			
			//********************************************************************************************//
			let listaRisposte = "[";
			let a = 0;
			do{
				let value = String.fromCharCode(65 + a);
				listaRisposte += JSON.stringify({
					"value" : value,
					"text" : risposta.value
				});
				if(++a!=nRisp) listaRisposte += ",";
			}while(a<nRisp);
			

/*			let listaRisposte = new Array(nRisp);
			for (let a = 0; a < nRisp; a++) {
				let risposta = document.getElementById("risp" + a);
				var value = String.fromCharCode(65 + a);
				if (risposta.value == "")
					break;
				else {
					listaRisposte[a] = JSON.stringify({
						"value" : value,
						"text" : risposta.value
					})
				}
			}*/
			fetch(url, {
				method : "POST",
				headers : new Headers({
					"Content-Type" : "application/json"
				}),
				body : JSON.stringify({
					"id" : "",
					"book" : bookTitle,
					"chapter" : chapter,
					"question" : quest,
					"testo" : text,
					"answerType" : answerType,
					"risposte" : listaRisposte,
					"rispostaUtente" :"",
					"rispostaEsatta" : risposteEsatte,
					"spiegazione" : spiegazione
				})
			});
		}
	</script>

</body>
</html>